#!/usr/bin/env perl
use Mojo::Base -strict, -signatures;
{
 routes => [
   {get => '/', to => 'example#welcome'},
   {
    under => {
      '/управление' => sub ($c) {

        # TODO: check if user is logged in
        #        return 1 if $c->current_route('login') || $c->user;
        #$c->redirect_to('login');
        #return;
        return 1;
      },
    },
    routes => [

               {
                any  => '/',
                to   => 'upravlenie#index',
                name => 'home_upravlenie'
               },
               {get => '/groups', to => 'groups#index', name => 'home_groups'},
               {
                get  => '/groups/create',
                to   => 'groups#create',
                name => 'create_groups'
               },
               {
                get  => '/groups/:id',
                to   => 'groups#show',
                name => 'show_groups'
               },
               {
                post => '/groups',
                to   => 'groups#store',
                name => 'store_groups'
               },
               {
                get  => '/groups/:id/edit',
                to   => 'groups#edit',
                name => 'edit_groups'
               },
               {
                put  => '/groups/:id',
                to   => 'groups#update',
                name => 'update_groups'
               },
               {
                delete => '/groups/:id',
                to     => 'groups#remove',
                name   => 'remove_groups'
               },
               {get => '/users', to => 'users#index', name => 'home_users'},
               {
                get  => '/users/create',
                to   => 'users#create',
                name => 'create_users'
               },
               {get => '/users/:id', to => 'users#show', name => 'show_users'},
               {post => '/users', to => 'users#store', name => 'store_users'},
               {
                get  => '/users/:id/edit',
                to   => 'users#edit',
                name => 'edit_users'
               },
               {
                put  => '/users/:id',
                to   => 'users#update',
                name => 'update_users'
               },
               {
                delete => '/users/:id',
                to     => 'users#remove',
                name   => 'remove_users'
               },
              ],
   },

 ]
}

